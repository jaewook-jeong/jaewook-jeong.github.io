{"componentChunkName":"component---src-templates-blog-post-js","path":"/react/open-ai-secretary/","result":{"data":{"site":{"siteMetadata":{"title":"Woogi Blog","comment":{"utterances":"jaewook-jeong/jaewook-jeong.github.io"}}},"markdownRemark":{"id":"9bdb6d41-e2e3-59e0-a601-ade3060beeac","excerpt":"ë‚˜ì— ëŒ€í•´ì„œ ì•Œì•„ì„œ ëŒ€ë‹µí•´ì£¼ëŠ” ë¹„ì„œê°€ ìˆìœ¼ë©´ ì–¼ë§ˆë‚˜ ì¢‹ì„ê¹Œ? GPTì²˜ëŸ¼ ì„œë¡œ ëŒ€í™”ë¥¼ ì£¼ê³  ë°›ëŠ” ì±„íŒ… í˜•íƒœë¡œ ê¸°íší–ˆìŠµë‹ˆë‹¤.\në¹ ë¥´ê²Œ ì™„ì„±í•˜ê¸°ìœ„í•´ Next.jsë¡œ ê°œë°œí•˜ê³  Vercelë¡œ ë°°í¬í•´ë³´ì! ëª©í‘œê°€ ì •í•´ì¡ŒìŠµë‹ˆë‹¤. gptì™€ ê´€ë ¨ì´ ì ì€ themeë¥¼ êµ¬í˜„í•œ ë°©ì‹ ë˜ëŠ” PWAâ€¦","html":"<blockquote>\n<p>ë‚˜ì— ëŒ€í•´ì„œ ì•Œì•„ì„œ ëŒ€ë‹µí•´ì£¼ëŠ” ë¹„ì„œê°€ ìˆìœ¼ë©´ ì–¼ë§ˆë‚˜ ì¢‹ì„ê¹Œ?</p>\n</blockquote>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">ğŸ’¡ GPTì—ê²Œ ì¸ê²©ì„ ë¶€ì—¬í•˜ë©´ ë˜ê² êµ¬ë‚˜!</code></pre></div>\n<p>GPTì²˜ëŸ¼ ì„œë¡œ ëŒ€í™”ë¥¼ ì£¼ê³  ë°›ëŠ” ì±„íŒ… í˜•íƒœë¡œ ê¸°íší–ˆìŠµë‹ˆë‹¤.\në¹ ë¥´ê²Œ ì™„ì„±í•˜ê¸°ìœ„í•´ Next.jsë¡œ ê°œë°œí•˜ê³  Vercelë¡œ ë°°í¬í•´ë³´ì! ëª©í‘œê°€ ì •í•´ì¡ŒìŠµë‹ˆë‹¤.</p>\n<p><em>gptì™€ ê´€ë ¨ì´ ì ì€ themeë¥¼ êµ¬í˜„í•œ ë°©ì‹ ë˜ëŠ” PWAì— ê´€í•œ ì–˜ê¸°ëŠ” ì´í›„ì— ë‹¤ì‹œ ì¨ë³´ê² ìŠµë‹ˆë‹¤.</em></p>\n<br/>\n<p><a href=\"https://gpt-secretary.vercel.app/\">ë¹„ì„œ ë¯¸ë¦¬ë³´ê¸°</a></p>\n<h2 id=\"open-ai\" style=\"position:relative;\"><a href=\"#open-ai\" aria-label=\"open ai permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Open AI</h2>\n<h3 id=\"api-key-ë°œê¸‰\" style=\"position:relative;\"><a href=\"#api-key-%EB%B0%9C%EA%B8%89\" aria-label=\"api key ë°œê¸‰ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>API key ë°œê¸‰</h3>\n<p>ë¨¼ì € Chat GPTë¥¼ ì‚¬ìš©í•˜ë ¤ë©´ <code class=\"language-text\">API key</code>ê°€ í•„ìš”í•©ë‹ˆë‹¤. <del>ê°œë°œìë¼ë©´ ë‹¹ì—°íˆ íšŒì›ê°€ì…ì€ ë˜ì–´ìˆê² ì£ ?</del> ë¨¼ì € <a href=\"https://platform.openai.com/account/api-keys\">api</a>ë¥¼ ë°œê¸‰ë°›ì•„ì¤ë‹ˆë‹¤.</p>\n<p><img src=\"https://velog.velcdn.com/images/_woogie/post/38fd09d9-50d9-4a74-bb90-160229bc18c7/image.png\" alt=\"\"></p>\n<p>Create new secret keyë¥¼ ëˆ„ë¥´ë©´ ë°œê¸‰ì´ ë©ë‹ˆë‹¤. ì´ ë•Œ ëŒ€ë¶€ë¶„ì˜ ì‹œí¬ë¦¿í‚¤ê°€ ê·¸ëŸ¬í•˜ë“¯ í•œ ë²ˆ ë°–ì— ë³¼ ìˆ˜ ì—†ê¸°ì— ë³µì‚¬í•˜ì…”ì„œ ì‚¬ìš©í•˜ì…”ì•¼í•©ë‹ˆë‹¤. ì ì´ì œ ëª¨ë“  ì¤€ë¹„ëŠ” ëë‚¬ìŠµë‹ˆë‹¤. í•´ë‹¹ í‚¤ì½”ë“œë¥¼ í”„ë¡œì íŠ¸ ë£¨íŠ¸í´ë”ì— <code class=\"language-text\">.env</code> íŒŒì¼ì„ ìƒì„±í•´ ì›í•˜ì‹œëŠ” ì´ë¦„ì˜ <code class=\"language-text\">key=value</code>í˜•íƒœë¡œ ë„£ì–´ì¤ë‹ˆë‹¤.</p>\n<blockquote>\n</blockquote>\n<p>ğŸ’¡ next.jsì—ì„œëŠ” ë¸Œë¼ìš°ì €(í´ë¼ì´ì–¸íŠ¸) ë‹¨ì—ì„œ í•´ë‹¹ í™˜ê²½ë³€ìˆ˜ë¥¼ ì‚¬ìš©í•˜ê²Œ ë  ê²½ìš°ì— ì•ì— <code class=\"language-text\">NEXT_PUBLIC</code> ì´ë¼ëŠ” prefixê°€ ë¶™ì–´ì•¼ í•©ë‹ˆë‹¤. <a href=\"https://nextjs.org/docs/basic-features/environment-variables#exposing-environment-variables-to-the-browser\">ê´€ë ¨ë§í¬</a></p>\n<br />\n<h3 id=\"open-ai-ê°€ì´ë“œ\" style=\"position:relative;\"><a href=\"#open-ai-%EA%B0%80%EC%9D%B4%EB%93%9C\" aria-label=\"open ai ê°€ì´ë“œ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Open AI ê°€ì´ë“œ</h3>\n<p>open aië¥¼ í†µí•´ Text completion, Code completion, Chat completion ë“±ì˜ ì‘ì—…ì„ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. <code class=\"language-text\">completions</code> ì´ë¼í•¨ì€ ì£¼ì–´ì§„ promptë¥¼ í†µí•´ ëª¨ë¸ì€ í•˜ë‚˜ ì´ìƒì˜ ì˜ˆì¸¡ ì™„ë£Œë¥¼ ë°˜í™˜í•˜ëŠ” ì‘ì—…ì„ ë§í•©ë‹ˆë‹¤. ëŒ€í™”ë¥¼ ì£¼ê³ ë°›ëŠ” ì•±ì„ ê°œë°œì¤‘ì´ê¸°ì— Chat completionì„ í•´ë³¼ê²ë‹ˆë‹¤. Chat modelsëŠ” ì—¬ëŸ¬ ë©”ì‹œì§€ ì¸í’‹ì„ ë°›ê³  ëª¨ë¸ì´ ë§Œë“¤ì–´ë‚¸ ë©”ì‹œì§€ë¥¼ ë¦¬í„´í•˜ëŠ” ëª¨ë¸ì…ë‹ˆë‹¤.</p>\n<blockquote>\n<p>ê·¸ëŸ¬ë©´ Text completionì„ ì“°ë©´ ì•ˆë˜ëŠ”ê±´ê°€ìš”?</p>\n</blockquote>\n<p>ì¨ë„ ë©ë‹ˆë‹¤. chatì€ Multi-turn ëŒ€í™”ë¥¼ ì‰½ê²Œí•˜ë„ë¡ ì„¤ê³„ë˜ì—ˆìŠµë‹ˆë‹¤. <del>ê·¸ë¦¬ê³  Textì— ì“°ì´ëŠ” <code class=\"language-text\">text-davinci-003</code>ì´ 10ë°° ë¹„ìŒ‰ë‹ˆë‹¤.</del></p>\n<blockquote>\n<p>ë„¤? 10ë°° ë¹„ì‹¸ë‹¤ë‡¨? ëˆì„ ë‚´ì•¼ í•˜ë‚˜ìš”?</p>\n</blockquote>\n<p>ë„¤! Free trial usageê°€ ì¡´ì¬í•©ë‹ˆë‹¤. ì´ 5ë‹¬ëŸ¬ê°€ creditìœ¼ë¡œ ì£¼ì–´ì§€ê³  í•´ë‹¹ ì‚¬ìš©ëŸ‰ ì´ìƒìœ¼ë¡œ ì‚¬ìš©í•˜ë©´ ì§€ë¶ˆí•´ì•¼ ì‚¬ìš©ê°€ëŠ¥í•©ë‹ˆë‹¤. Chatì— ì“°ì¼ ëª¨ë¸ì¸ <code class=\"language-text\">gpt-3.5-turbo</code> ì€ 1000í† í° ë‹¹ $0.002ì˜ ì•„ì£¼ ì ì€ ë¹„ìš©ì´ ë°œìƒí•©ë‹ˆë‹¤.</p>\n<blockquote>\n<p>í† í°ì€ ë˜ ë­”ê°€ìš”?</p>\n</blockquote>\n<p>í† í°ì€ ë‹¨ì–´ì¡°ê°ìœ¼ë¡œ ìƒê°í•˜ì‹œë©´ ë©ë‹ˆë‹¤. APIê°€ Promptë¥¼ ì²˜ë¦¬í•˜ê¸°ì „ì— inputì„ í† í°ìœ¼ë¡œ ë¶„ë¥˜í•©ë‹ˆë‹¤. í† í°ì€ ì •í™•í•˜ê²Œ ë‹¨ì–´ì¡°ê°ìœ¼ë¡œ ì˜ë¦¬ì§€ ì•Šì•„ ë‹¨ì–´ì¡°ê°ê³¼ í•­ìƒ ì¼ì¹˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. í† í°ì— ëŒ€í•´ ë” ê¶ê¸ˆí•˜ì‹œë‹¤ë©´ <a href=\"https://help.openai.com/en/articles/4936856-what-are-tokens-and-how-to-count-them\">ë§í¬</a>ë¥¼ ì‚´í´ë³´ì„¸ìš”!</p>\n<p>**ğŸ’¡ ê·¸ëŸ¬ë©´ gpt-3.5-turbo ëª¨ë¸ì„ ì‚¬ìš©í•´ë´…ì‹œë‹¤!\n**</p>\n<br />\n<h3 id=\"open-ai-ë¼ì´ë¸ŒëŸ¬ë¦¬\" style=\"position:relative;\"><a href=\"#open-ai-%EB%9D%BC%EC%9D%B4%EB%B8%8C%EB%9F%AC%EB%A6%AC\" aria-label=\"open ai ë¼ì´ë¸ŒëŸ¬ë¦¬ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Open AI ë¼ì´ë¸ŒëŸ¬ë¦¬</h3>\n<p>ë¨¼ì € <a href=\"https://www.npmjs.com/package/openai\">open AIë¼ì´ë¸ŒëŸ¬ë¦¬</a>ë¥¼ ì‚¬ìš©í•´ ê°œë°œì„ ì‹œì‘í•´ë´…ì‹œë‹¤. Readmeì—ë„ ì„¤ëª…ì´ ì˜ ë˜ì–´ìˆìŠµë‹ˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> Configuration<span class=\"token punctuation\">,</span> OpenAIApi <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"openai\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> configuration <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Configuration</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">apiKey</span><span class=\"token operator\">:</span> process<span class=\"token punctuation\">.</span>env<span class=\"token punctuation\">.</span>ìœ„ì—ì„œenvíŒŒì¼ì— ì‘ì„±í•˜ì‹  key<span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> openai <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">OpenAIApi</span><span class=\"token punctuation\">(</span>configuration<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> completion <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> openai<span class=\"token punctuation\">.</span><span class=\"token function\">createCompletion</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">model</span><span class=\"token operator\">:</span> <span class=\"token string\">\"text-davinci-003\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">prompt</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Hello world\"</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>completion<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">.</span>choices<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>text<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>ë­ì•¼ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•˜ë‹ˆê¹Œ ë²Œì¨ ëë‚¬ë„¤..?\nê·¸ëŸ¬ë‚˜ Readmeì— ë³´ì´ëŠ” ì˜ˆì‹œëŠ” Text completionì…ë‹ˆë‹¤. <code class=\"language-text\">gpt-3.5-trubo</code>ë¥¼ ì‚¬ìš©í•˜ëŠ” Chat Completion í˜•ì‹ì— ë§ê²Œ ì•„ë˜ì²˜ëŸ¼ ì½”ë“œê°€ ì‘ì„±ë©ë‹ˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> Configuration<span class=\"token punctuation\">,</span> OpenAIApi <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"openai\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> configuration <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Configuration</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  apiKey<span class=\"token operator\">:</span> process<span class=\"token punctuation\">.</span>env<span class=\"token punctuation\">.</span>ìœ„ì—ì„œenvíŒŒì¼ì— ì‘ì„±í•˜ì‹  key<span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> openai <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">OpenAIApi</span><span class=\"token punctuation\">(</span>configuration<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> response <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> openai<span class=\"token punctuation\">.</span><span class=\"token function\">createChatCompletion</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n\tmodel<span class=\"token operator\">:</span> <span class=\"token string\">\"gpt-3.5-turbo\"</span><span class=\"token punctuation\">,</span>\n\tmax_tokens<span class=\"token operator\">:</span> <span class=\"token number\">2048</span><span class=\"token punctuation\">,</span>\n\tmessages<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n\t  <span class=\"token punctuation\">{</span>\n\t    role<span class=\"token operator\">:</span> <span class=\"token string\">\"user\"</span><span class=\"token punctuation\">,</span>\n\t    content<span class=\"token operator\">:</span> <span class=\"token string\">\"ì§ˆë¬¸\"</span><span class=\"token punctuation\">,</span>\n\t  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>response<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">.</span>choices<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>message<span class=\"token punctuation\">.</span>content<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>ì´ì œ ìœ„ì˜ ì½”ë“œë¥¼ fetchí•˜ë©´ ë  ê²ƒ ê°™ìŠµë‹ˆë‹¤. ë²Œì¨ í•´ì¹˜ì› ë‚˜?</p>\n<blockquote>\n</blockquote>\n<p>ğŸ’¡ ê¸°íƒ€ createChatCompletion íŒŒë¼ë¯¸í„° ê°’ì€ <a href=\"https://platform.openai.com/docs/api-reference/chat\">ë§í¬</a>ì—ì„œ ë³´ì‹¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>\n<br />\n<h3 id=\"refused-to-set-unsafe-header-user-agent\" style=\"position:relative;\"><a href=\"#refused-to-set-unsafe-header-user-agent\" aria-label=\"refused to set unsafe header user agent permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Refused to set unsafe header â€œUser-Agentâ€</h3>\n<p>ë¶„ëª…íˆ ë‹µë³€ì´ ì˜ ì˜µë‹ˆë‹¤â€¦ ê·¼ë° ì™œ ì½˜ì†”ì— ì—ëŸ¬ê°€?\nì´ìœ ëŠ” ë‹¹ì—°í–ˆìŠµë‹ˆë‹¤.</p>\n<p><img src=\"https://velog.velcdn.com/images/_woogie/post/2b6dbd0d-1abb-40a7-9346-4a4bdc254b1f/image.png\" alt=\"\"></p>\n<p>server-sideì—ì„œë§Œ ì‚¬ìš©í–ˆì–´ì•¼í–ˆìŠµë‹ˆë‹¤. APIí‚¤ê°€ ë…¸ì¶œë˜ê±°ë“ ìš”. Next.jsë¥¼ ì‚¬ìš©í•˜ê¸°ì— <code class=\"language-text\">API Routes</code> ê¸°ëŠ¥ì„ ë¹ ë¥´ê²Œ ë„ì…í–ˆìŠµë‹ˆë‹¤.</p>\n<br/>\n<h3 id=\"api-routes\" style=\"position:relative;\"><a href=\"#api-routes\" aria-label=\"api routes permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>API Routes</h3>\n<p>ë¨¼ì € pages í´ë” ë‚´ë¶€ì— apií´ë”ë¥¼ ë§Œë“  í›„ ì›í•˜ëŠ” apiëª…ìœ¼ë¡œ íŒŒì¼ì„ ë§Œë“¤ì–´ì¤ë‹ˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token comment\">// pages/api/openai.ts</span>\n\n<span class=\"token keyword\">import</span> <span class=\"token keyword\">type</span> <span class=\"token punctuation\">{</span> NextApiRequest<span class=\"token punctuation\">,</span> NextApiResponse <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'next'</span>\n\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> CreateChatCompletionRequest <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'openai/api'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> Configuration<span class=\"token punctuation\">,</span> OpenAIApi <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'openai'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> configuration <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Configuration</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  apiKey<span class=\"token operator\">:</span> process<span class=\"token punctuation\">.</span>env<span class=\"token punctuation\">.</span>ìœ„ì—ì„œenvíŒŒì¼ì— ì‘ì„±í•˜ì‹  key<span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> openai <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">OpenAIApi</span><span class=\"token punctuation\">(</span>configuration<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> getChatCompletion <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span>content<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token builtin\">Promise</span><span class=\"token operator\">&lt;</span><span class=\"token builtin\">string</span><span class=\"token operator\">></span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> completionParams<span class=\"token operator\">:</span> CreateChatCompletionRequest <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n    model<span class=\"token operator\">:</span> <span class=\"token string\">'gpt-3.5-turbo'</span><span class=\"token punctuation\">,</span>\n    max_tokens<span class=\"token operator\">:</span> <span class=\"token number\">2048</span><span class=\"token punctuation\">,</span>\n  \tmessages<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n\t\t  <span class=\"token punctuation\">{</span>\n\t\t    role<span class=\"token operator\">:</span> <span class=\"token string\">\"user\"</span><span class=\"token punctuation\">,</span>\n\t\t    content<span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>content<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\n\t\t  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">const</span> response <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> openai<span class=\"token punctuation\">.</span><span class=\"token function\">createChatCompletion</span><span class=\"token punctuation\">(</span>completionParams<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> response<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">.</span>choices<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>message<span class=\"token punctuation\">.</span>content<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token keyword\">async</span> <span class=\"token keyword\">function</span> <span class=\"token function\">handler</span><span class=\"token punctuation\">(</span>\n  req<span class=\"token operator\">:</span> NextApiRequest<span class=\"token punctuation\">,</span>\n  res<span class=\"token operator\">:</span> NextApiResponse<span class=\"token operator\">&lt;</span><span class=\"token builtin\">string</span><span class=\"token operator\">></span>\n<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> reqBody <span class=\"token operator\">=</span> req<span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> reply <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token function\">getChatCompletion</span><span class=\"token punctuation\">(</span><span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">parse</span><span class=\"token punctuation\">(</span>reqBody<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>content <span class=\"token keyword\">as</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">)</span>\n    res<span class=\"token punctuation\">.</span><span class=\"token function\">status</span><span class=\"token punctuation\">(</span><span class=\"token number\">200</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">json</span><span class=\"token punctuation\">(</span>reply<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> \n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    res<span class=\"token punctuation\">.</span><span class=\"token function\">status</span><span class=\"token punctuation\">(</span><span class=\"token number\">500</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>ì´ì œ ì—ëŸ¬ê°€ ì•ˆëœ¨ëŠ”êµ°ìš”! í•´ì¹˜ì› ë‹¤!</p>\n<blockquote>\n</blockquote>\n<p>ğŸ’¡ ì´ì œ nodeì—ì„œ í™˜ê²½ë³€ìˆ˜ê°€ ì‚¬ìš©ë˜ê¸° ë•Œë¬¸ì— ìœ„ì—ì„œ ì„¤ëª…ë“œë¦° <code class=\"language-text\">NEXT_PULBIC</code> prefixëŠ” ì•ˆë¶™ì´ì…”ë„ ë©ë‹ˆë‹¤!</p>\n<br/>\n<h3 id=\"system--assistant--user\" style=\"position:relative;\"><a href=\"#system--assistant--user\" aria-label=\"system  assistant  user permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>System | Assistant | User</h3>\n<p>ê·¼ë° ë‚˜ë¥¼ ì•Œê³  ìˆëŠ” ìƒíƒœì—ì„œ ë‹µë³€ì„ í•´ì•¼í•˜ëŠ”ë° ì–´ë–»ê²Œ ì œ ìì‹ ì´ ëˆ„êµ°ì§€, ë­˜ ì¢‹ì•„í•˜ëŠ”ì§€, ë­ì— ê´€ì‹¬ìˆëŠ”ì§€ë¥¼ ì–´ë–»ê²Œ ì•Œë ¤ì¤„ ìˆ˜ ìˆì„ê¹Œìš”?</p>\n<p>ì´ì œ messages íŒŒë¼ë¯¸í„°ì˜ <code class=\"language-text\">role</code>ì— ëŒ€í•´ ì•Œì•„ë´ì•¼í•  ì°¨ë¡€ì…ë‹ˆë‹¤. messagesëŠ” message ê°ì²´ì˜ ë¦¬ìŠ¤íŠ¸ë¡œ êµ¬ì„±ë˜ì–´ì•¼ í•©ë‹ˆë‹¤. ì´ ë•Œ ê°ì²´ëŠ” <code class=\"language-text\">role</code>ê³¼ <code class=\"language-text\">content</code>ë¥¼ ê°€ì§ˆ ìˆ˜ ìˆëŠ”ë°ìš”. ì´ ë•Œ roleì—ëŠ” system, assistant, userë¡œ ì§€ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì¼ë°˜ì ìœ¼ë¡œ assistant ë©”ì‹œì§€ì™€ user ë©”ì‹œì§€ê°€ ë²ˆê°ˆì•„ê°€ë©° ëŒ€í™” í˜•íƒœê°€ êµ¬ì„±ë©ë‹ˆë‹¤.</p>\n<p>ë¨¼ì € <code class=\"language-text\">user ë©”ì‹œì§€</code>ëŠ” end userê°€ ìƒì„±í•œ ë©”ì‹œì§€ì…ë‹ˆë‹¤. <code class=\"language-text\">assistant ë©”ì‹œì§€</code>ëŠ” ì›í•˜ëŠ” ëŒ€ë‹µì´ ë‚˜ì˜¤ë„ë¡ ì •ë³´ë¥¼ ì œê³µí•˜ëŠ”ë° ë„ì›€ì´ ë˜ëŠ” ë©”ì‹œì§€ì…ë‹ˆë‹¤. <code class=\"language-text\">system role</code>ì€ <code class=\"language-text\">assistant</code>ì˜ í–‰ë™ì— ì˜í–¥ì„ ì¤ë‹ˆë‹¤. <strong>ê·¸ëŸ¬ë‚˜ í•­ìƒ ì‹œìŠ¤í…œ ë©”ì‹œì§€ë¥¼ ê°•ë ¥í•˜ê²Œ ë”°ë¥´ì§„ ì•ŠìŠµë‹ˆë‹¤!</strong> (ë¯¸ë˜ì˜ ëª¨ë¸ì€ ì‹œìŠ¤í…œ ë©”ì‹œì§€ë¥¼ ì˜ ë”°ë¥´ë„ë¡ íŠ¸ë ˆì´ë‹ ëœë‹µë‹ˆë‹¤!)</p>\n<p>ì•„í•˜ ê·¸ëŸ¬ë©´ systemë©”ì‹œì§€ë¥¼ ì´ìš©í•´ì„œ ì œ ìì‹ ì— ëŒ€í•´ ì•Œë ¤ì£¼ë©´ ë˜ê² êµ°ìš”?</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> getChatCompletion <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span>content<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token builtin\">Promise</span><span class=\"token operator\">&lt;</span><span class=\"token builtin\">string</span><span class=\"token operator\">></span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> completionParams<span class=\"token operator\">:</span> CreateChatCompletionRequest <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n    model<span class=\"token operator\">:</span> <span class=\"token string\">'gpt-3.5-turbo'</span><span class=\"token punctuation\">,</span>\n    max_tokens<span class=\"token operator\">:</span> <span class=\"token number\">2048</span><span class=\"token punctuation\">,</span>\n  \tmessages<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n\t\t\t<span class=\"token punctuation\">{</span>\n\t\t\t\trole<span class=\"token operator\">:</span> <span class=\"token string\">'system'</span><span class=\"token punctuation\">,</span>\n\t\t\t\tcontent<span class=\"token operator\">:</span> <span class=\"token string\">'Your name is Jeong Jae-wook. You are a third year front-end developer.'</span><span class=\"token punctuation\">,</span>\n\t\t\t<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n\t\t    role<span class=\"token operator\">:</span> <span class=\"token string\">\"user\"</span><span class=\"token punctuation\">,</span>\n\t\t    content<span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>content<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\n\t\t  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">const</span> response <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> openai<span class=\"token punctuation\">.</span><span class=\"token function\">createChatCompletion</span><span class=\"token punctuation\">(</span>completionParams<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> response<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">.</span>choices<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>message<span class=\"token punctuation\">.</span>content<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<blockquote>\n</blockquote>\n<p>ğŸ’¡ ê·¼ë° ë§‰ìƒ ì‘ì—…ì„ í•´ë³´ë‹ˆ roleì„ systemê³¼ assistantë¡œ ì²˜ë¦¬í–ˆì„ ë•Œì— ë”°ë¥¸ ê²°ê³¼ë¬¼ì— í° ì°¨ì´ë¥¼ ëŠë¼ê¸´ ì–´ë ¤ì› ìŠµë‹ˆë‹¤. ê·¸ë˜ì„œ ì•„ì§ í•´ë‹¹ ì‚¬í•­ì€ ì—¬ëŸ¬ ì•„í‹°í´ì„ ì°¾ì•„ë³´ê³  ì—¬ëŸ¬ ë°©ë²•ì„ ì‹œë„ì¤‘ì— ìˆìŠµë‹ˆë‹¤.</p>\n<br />\n<br />\n<h2 id=\"ë°°í¬\" style=\"position:relative;\"><a href=\"#%EB%B0%B0%ED%8F%AC\" aria-label=\"ë°°í¬ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ë°°í¬</h2>\n<h3 id=\"vercel\" style=\"position:relative;\"><a href=\"#vercel\" aria-label=\"vercel permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>vercel</h3>\n<p>Next.jsë¡œ ê°œë°œì„ í–ˆìœ¼ë‹ˆ ë¹ ë¥´ê²Œ vercelë¡œ ë°°í¬ë¥¼ ì§„í–‰í–ˆìŠµë‹ˆë‹¤. repositoryë¥¼ <a href=\"https://vercel.com/new\">import</a>í•˜ê³  ë°°í¬ë¥¼ í•´ì¤ë‹ˆë‹¤. ê·¸ë¦¬ê³  <a href=\"https://vercel.com/jaewook-jeong/gpt-secretary/settings/environment-variables\">í™˜ê²½ë³€ìˆ˜ë„</a> ìŠì§€ ì•Šê³  ì„¤ì •í•´ì¤ë‹ˆë‹¤!</p>\n<blockquote>\n<p><strong>ê·¸ëŸ°ë°!</strong></p>\n</blockquote>\n<p>ê°€ë” ìš”ì²­ì„ ë³´ë‚´ë©´ <code class=\"language-text\">504ì—ëŸ¬</code>ê°€ëœ¹ë‹ˆë‹¤.\n<code class=\"language-text\">Uncaught (in promise) SyntaxError: Unexpected token 'A', \"An error o\"... is not valid JSON</code></p>\n<p>Vercelì—ì„œ ë°°í¬í–ˆì„ ë•Œ timeoutê³¼ ê´€ë ¨ëœ ë¬¸ì œì˜€ìŠµë‹ˆë‹¤. ì™œëƒí•˜ë©´ vercel hobby í‹°ì–´ì—ì„œ ì„¤ì •í•  ìˆ˜ ìˆëŠ” <code class=\"language-text\">maxDuration</code> ì€ 1~10ì´ˆ ì‚¬ì´ì˜ ê°’ë§Œ ì…ë ¥í•  ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤. ê·¸ë˜ì„œ ê°„í˜¹ ë‹µë³€ì´ ëŠ¦ì–´ì ¸ 10ì´ˆê°€ ë„˜ì–´ê°€ëŠ” ê²½ìš°ì— ì—ëŸ¬ê°€ ë°œìƒí–ˆë˜ ê²ƒì…ë‹ˆë‹¤.</p>\n<p><code class=\"language-text\">ê·¸ëŸ¬ë©´ ì–´ë–»ê²Œ í•´ê²°í•  ìˆ˜ ìˆì„ê¹Œ?</code></p>\n<blockquote>\n</blockquote>\n<p>ğŸ’¡ Edge functionì„ ì‚¬ìš©í•´ë³´ì!</p>\n<br />\n<br />\n<h2 id=\"edge-api-routes\" style=\"position:relative;\"><a href=\"#edge-api-routes\" aria-label=\"edge api routes permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Edge API Routes</h2>\n<h3 id=\"edge\" style=\"position:relative;\"><a href=\"#edge\" aria-label=\"edge permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Edge?</h3>\n<p><a href=\"https://nextjs.org/docs/api-routes/edge-api-routes\">Edge API Routes</a>ëŠ” <a href=\"https://nextjs.org/docs/api-reference/edge-runtime\">Next.js Edge Runtime</a>ì„ ì´ìš©í•˜ì—¬ ë†’ì€ í¼í¬ë¨¼ìŠ¤ë¥¼ ë³´ì—¬ì£¼ëŠ” APIsì…ë‹ˆë‹¤. ë¨¼ì € Edge Runtimeì„ ì´í•´í•˜ê¸° ìœ„í•´ì„œëŠ” Edge Computingì— ëŒ€í•´ ì•Œì•„ì•¼ í•˜ëŠ”ë°ìš”. <a href=\"https://www.redhat.com/ko/topics/edge-computing\">Edge Computingì´ë€ ì‚¬ìš©ìì—ê²Œ ê°€ê¹Œìš´ ê³³(ë„¤íŠ¸ì›Œí¬ â€˜ì—£ì§€â€™)ì—ì„œ ì»´í“¨íŒ…ì„ ìˆ˜í–‰í•˜ì—¬ ëŒ€ê¸° ì‹œê°„ì„ ì¤„ì´ê³  ëŒ€ì—­í­ì„ ì ˆì•½í•˜ëŠ” ë°©ì‹ì…ë‹ˆë‹¤.</a> Edge Computingì„ ì´ìš©í•˜ë©´ ì‹¤ì‹œê°„ìœ¼ë¡œ ë°ì´í„° ì†ŒìŠ¤ì—ì„œ ë¬¸ì œë¥¼ í•´ê²°í•  ìˆ˜ ìˆëŠ” ì¥ì ì´ ìˆìŠµë‹ˆë‹¤. ì¦‰ Edge Runtimeì´ë€ â€˜ì—£ì§€â€™ë¼ëŠ” ì„œë²„ë¦¬ìŠ¤ ì»´í“¨íŒ… í™˜ê²½ì„ ì±„íƒí•˜ì—¬ ê°œë°œìì—ê²Œ ì›¹í‘œì¤€ì— ì•Œë§ê²Œ ì„¤ê³„ëœ Next.jsì˜ í™˜ê²½ì…ë‹ˆë‹¤.</p>\n<p>íŠ¹íˆ ì´ëŸ¬í•œ EdgeëŠ” streamingê³¼ ê°™ì´ ì‚¬ìš©í•˜ë©´ ì‘ë‹µ ì „ì²´ë¥¼ ê¸°ë‹¤ë¦¬ëŠ” ê²ƒì´ ì•„ë‹ˆë¼ ì‘ë‹µì„ ì‘ì€ ì²­í¬ë¡œ ë¶„í• í•˜ì—¬ ì¢‹ì€ ì‚¬ìš©ì ê²½í—˜ì„ ì´ëŒì–´ë‚¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>\n<p>ë§ˆì¹¨ Open AIì—ì„œë„ <a href=\"https://platform.openai.com/docs/api-reference/chat/create#chat/create-stream\">stream</a>ì„ ì§€ì›í•˜ëŠ”ë°ìš”. streamìœ¼ë¡œ ì²˜ë¦¬í•˜ë©´ ChatGPTì²˜ëŸ¼ ë¶„ì ˆëœ ë©”ì‹œì§€ê°€ ì „ë‹¬ë©ë‹ˆë‹¤. streamì´ ì¢…ë£Œë  ë•Œì—ëŠ” <code class=\"language-text\">data: [DONE]</code>ì˜ í˜•íƒœë¡œ ë©”ì‹œì§€ê°€ ë‚´ë ¤ì˜µë‹ˆë‹¤. ì´ë¥¼ í†µí•´ ë‹¤ìŒê³¼ ê°™ì´ ì½”ë“œë¥¼ ì‘ì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>\n<br/>\n<h3 id=\"nextjs\" style=\"position:relative;\"><a href=\"#nextjs\" aria-label=\"nextjs permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Next.js</h3>\n<p>Next.jsì—ì„œ edge apië¥¼ ì‚¬ìš©í•˜ë ¤ë©´ ê¸°ì¡´ì— ë§Œë“¤ì—ˆë˜ API Routesì— ì•„ë˜ì™€ ê°™ì€ ì½”ë“œë§Œ ì¶”ê°€í•˜ë©´ ë©ë‹ˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> config <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  runtime<span class=\"token operator\">:</span> <span class=\"token string\">\"edge\"</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<br/>\n<h3 id=\"stream-ì„¤ì •\" style=\"position:relative;\"><a href=\"#stream-%EC%84%A4%EC%A0%95\" aria-label=\"stream ì„¤ì • permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Stream ì„¤ì •</h3>\n<p>ì´ì œ ê¸°ì¡´ì˜ createChatCompletionì— streamì„ ë¼ì–¹ì–´ ë´…ì‹œë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">const</span> res <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> openai<span class=\"token punctuation\">.</span><span class=\"token function\">createChatCompletion</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n\t\t<span class=\"token literal-property property\">model</span><span class=\"token operator\">:</span> <span class=\"token string\">'gpt-3.5-turbo'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">max_tokens</span><span class=\"token operator\">:</span> <span class=\"token number\">2048</span><span class=\"token punctuation\">,</span>\n\t\t<span class=\"token literal-property property\">stream</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n  \t<span class=\"token literal-property property\">messages</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n\t\t\t<span class=\"token punctuation\">{</span>\n\t\t\t\t<span class=\"token literal-property property\">role</span><span class=\"token operator\">:</span> <span class=\"token string\">'system'</span><span class=\"token punctuation\">,</span>\n\t\t\t\t<span class=\"token literal-property property\">content</span><span class=\"token operator\">:</span> <span class=\"token string\">'Your name is Jeong Jae-wook. You are a third year front-end developer.'</span><span class=\"token punctuation\">,</span>\n\t\t\t<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n\t\t    <span class=\"token literal-property property\">role</span><span class=\"token operator\">:</span> <span class=\"token string\">\"user\"</span><span class=\"token punctuation\">,</span>\n\t\t    <span class=\"token literal-property property\">content</span><span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>content<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\n\t\t  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">responseType</span><span class=\"token operator\">:</span> <span class=\"token string\">'stream'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">let</span> returnText <span class=\"token operator\">=</span> <span class=\"token string\">''</span><span class=\"token punctuation\">,</span>\nres<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">.</span><span class=\"token function\">on</span><span class=\"token punctuation\">(</span><span class=\"token string\">'data'</span><span class=\"token punctuation\">,</span> <span class=\"token parameter\">data</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> lines <span class=\"token operator\">=</span> data<span class=\"token punctuation\">.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">split</span><span class=\"token punctuation\">(</span><span class=\"token string\">'\\n'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">filter</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">line</span> <span class=\"token operator\">=></span> line<span class=\"token punctuation\">.</span><span class=\"token function\">trim</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">!==</span> <span class=\"token string\">''</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> line <span class=\"token keyword\">of</span> lines<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">const</span> message <span class=\"token operator\">=</span> line<span class=\"token punctuation\">.</span><span class=\"token function\">replace</span><span class=\"token punctuation\">(</span><span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">^data: </span><span class=\"token regex-delimiter\">/</span></span><span class=\"token punctuation\">,</span> <span class=\"token string\">''</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>message <span class=\"token operator\">===</span> <span class=\"token string\">'[DONE]'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// Stream finished</span>\n        <span class=\"token punctuation\">}</span>\n        <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">const</span> parsed <span class=\"token operator\">=</span> <span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">parse</span><span class=\"token punctuation\">(</span>message<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t\t\t\treturnText <span class=\"token operator\">+=</span> parsed<span class=\"token punctuation\">.</span>choices<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>text<span class=\"token punctuation\">;</span> \n        <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span><span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            console<span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Could not JSON parse stream message'</span><span class=\"token punctuation\">,</span> message<span class=\"token punctuation\">,</span> error<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">return</span> returnText<span class=\"token punctuation\">;</span></code></pre></div>\n<p>streamì˜ ì²˜ë¦¬ëŠ” ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤. ì²­í¬ëœ ë°ì´í„°ê°€ ë“¤ì–´ì˜¬ ë•Œë§ˆë‹¤ í•´ë‹¹ í˜•íƒœë¥¼ ê°€ê³µí•˜ì—¬ messageë¥¼ ë½‘ì•„ë‚´ ìµœì¢… ë‹µë³€ stringì„ ë§Œë“¤ì–´ë‚´ëŠ” ê³¼ì •ì…ë‹ˆë‹¤.</p>\n<br/>\n<br/>\n<h2 id=\"ì—¬ì „íˆ-ë¯¸ì™„ì„±\" style=\"position:relative;\"><a href=\"#%EC%97%AC%EC%A0%84%ED%9E%88-%EB%AF%B8%EC%99%84%EC%84%B1\" aria-label=\"ì—¬ì „íˆ ë¯¸ì™„ì„± permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ì—¬ì „íˆ ë¯¸ì™„ì„±.</h2>\n<p><img src=\"https://velog.velcdn.com/images/_woogie/post/67e12016-0b5f-4a4d-baf0-0c72e82b98ad/image.png\" alt=\"\"></p>\n<blockquote>\n<p>íŒì‚¬ë‹˜.. ì €ëŠ” ì œ ì™¸ëª¨ì— ëŒ€í•´ assistantë‚˜ systemë©”ì‹œì§€ë¥¼ ë³´ë‚¸ì ì´ ì—†ìŠµë‹ˆë‹¤ğŸ˜­</p>\n</blockquote>\n<p>ì•„ì§ ë¶ˆì™„ì „í•œ ëª¨ìŠµì„ ë³´ì…ë‹ˆë‹¤. ê³„ì† ê°™ì€ ë‹µë³€ì„ ë³´ì¸ë‹¤ê±°ë‚˜, ì…ë ¥ë°›ì€ ì–¸ì–´ íƒ€ì…ëŒ€ë¡œ ë‹µë³€ì„ í•´ì£¼ì§€ ì•ŠëŠ”ë‹¤ê±°ë‚˜ ì—¬ì „íˆ í•´ê²°í•  ë¶€ë¶„ì€ ë§ìŠµë‹ˆë‹¤. í† í° ì œí•œì„ ê±¸ì–´ë‘ì§€ ì•Šì•„ì„œ ì œí•œ í† í°ì„ ë„˜ì–´ê°€ëŠ” ìš”ì²­ì— ëŒ€í•œ ì—ëŸ¬ ì²˜ë¦¬ë„ í•„ìš”í•˜ê² êµ°ìš”. ê·¸ë¦¬ê³  ì•„ì§ systemê³¼ assistantì˜ ëšœë ·í•œ ì°¨ì´ë„ ëª¨ë¥´ê² êµ¬ìš”.\nê·¸ë˜ë„ ì´ëŸ¬í•œ ê°œë°œê³¼ì •ì„ í†µí•´ ChatGPT ë” ë‚˜ì•„ê°€ ì´ëŸ¬í•œ ì¸ê³µì§€ëŠ¥ì´ ì–´ë–»ê²Œ ë§Œë“¤ì–´ì§€ê³  ì´ê²ƒì„ ì–´ë–»ê²Œ ìœ ì €ì—ê²Œ ì œê³µí•˜ëŠ”ì§€ ì´í•´í•˜ëŠ” ì‹œê°„ì´ ë˜ì—ˆìŠµë‹ˆë‹¤.</p>\n<p>GPT4ê°€ ë‚˜ì™”ëŠ”ë°, ë‹¤ìŒì—ëŠ” 4ë¥¼ ì‚¬ìš©í•˜ë©° ë” ë‚˜ì€ ë‹µë³€ì„ ì–»ëŠ” ëª¨ë¸ì„ ì‚¬ìš©í•˜ì—¬ ë” ì™„ì„±ë„ ë†’ì€ ì•±ì„ êµ¬í˜„í•´ë³´ê³  ì‹¶ìŠµë‹ˆë‹¤. ë˜í•œ ì—¬ëŸ¬ AIíšŒì‚¬ì—ì„œ AIì—ê²Œ ì¸ê²©ì„ ë¶€ì—¬í•˜ë ¤ëŠ” ë…¸ë ¥ì„ ê¸°ìš¸ì´ê³  ìˆëŠ”ë° ì´ë¥¼ í†µí•œ ì¬ë¯¸ìˆê³  ì°¸ì‹ í•œ í”„ë¡œë•íŠ¸ê°€ ë§ì•„ì¡Œìœ¼ë©´ ì¢‹ê² ë‹¤ëŠ” ìƒê°ì„ í•´ë´…ë‹ˆë‹¤.</p>\n<p>ë¬¸ì œê°€ ìˆë‹¤ë©´ <a href=\"https://github.com/jaewook-jeong/gpt-secretary/issues\">ì´ìŠˆ</a>ì— ë‚¨ê²¨ì£¼ì„¸ìš”~</p>","frontmatter":{"title":"ë‚˜ì— ëŒ€í•´ì„œ ì•Œì•„ì„œ ëŒ€ë‹µí•´ì£¼ëŠ” ë¹„ì„œê°€ ìˆìœ¼ë©´ ì–¼ë§ˆë‚˜ ì¢‹ì„ê¹Œ?","date":"March 22, 2023","description":"Open AIë¥¼ ì´ìš©í•´ ë‚˜ì— ëŒ€í•´ ì˜ ì•Œê³  ìˆëŠ” ë¹„ì„œë¥¼ ë§Œë“¤ì–´ ë³´ì!"}},"previous":{"fields":{"slug":"/react/navigation-block/"},"frontmatter":{"title":"ë¦¬ì•¡íŠ¸ ë˜ëŠ” Next.jsì—ì„œ History api ë¼ìš°íŒ…ì„ ê°ì§€í•˜ëŠ” ë²•(feat. modal)"}},"next":{"fields":{"slug":"/nextjs/migration-1/"},"frontmatter":{"title":"Reactì—ì„œ Next.jsë¡œ Migration(EP1: ëˆ„êµ¬ë‚˜ í”¼ì¹˜ ëª»í•  ì‚¬ì •ì´ ìˆë‹¤)"}}},"pageContext":{"id":"9bdb6d41-e2e3-59e0-a601-ade3060beeac","previousPostId":"98e76d5a-4fec-52cb-a638-b883512c6fad","nextPostId":"d63f67fe-cfdf-596d-974f-e2ee23ae5877"}},"staticQueryHashes":["2841359383","4234858013"]}